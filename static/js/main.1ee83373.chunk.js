(this["webpackJsonpgene-interactions"]=this["webpackJsonpgene-interactions"]||[]).push([[0],{149:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(36),s=n.n(i),a=(n(149),n(4)),u=n.n(a),o=n(13),h=n(2),l=n(22),f=n(14),g=n(3),d=n.p+"static/media/mutationsFiltered.2a73bbda.csv";function j(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(u.a.mark((function e(t){var n,r,c,i,s,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c(d);case 2:return n=e.sent,r=O(n),c=v(n,t),i=c.grouped,s=c.coefficients,a=w(r,i,s),e.abrupt("return",{geneFrequencies:a,geneList:r});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,n){var r={};return e.forEach((function(e){return r[e]={resistant:{withGene:0,withoutGene:0},sensitive:{withGene:0,withoutGene:0},gene:e,totalBalance:0,withGeneBalance:0,withoutGeneBalance:0,representedAcrossGeneStates:!1}})),["resistant","sensitive"].forEach((function(e){return["withGene","withoutGene"].forEach((function(c){!function(e,t,n,r,c){r.forEach((function(r){r.forEach((function(r){n[r.symbol][e][t]+=c}))}))}(e,c,r,t[e][c],n[e][c].c)}))})),e.forEach((function(e){r[e].withGeneBalance=r[e].resistant.withGene-r[e].sensitive.withGene,r[e].withoutGeneBalance=r[e].resistant.withoutGene-r[e].sensitive.withoutGene,r[e].totalBalance=r[e].withGeneBalance-r[e].withoutGeneBalance,r[e].representedAcrossGeneStates=r[e].resistant.withGene+r[e].sensitive.withGene!==0&&r[e].resistant.withoutGene+r[e].sensitive.withoutGene!==0})),Object.values(r)}function O(e){var t=e.map((function(e){return e.symbol}));return Object(f.a)(new Set(t))}function v(e,t){var n=g.e(e,(function(e){return e.sample_id})),r={resistant:{withGene:[],withoutGene:[]},sensitive:{withGene:[],withoutGene:[]}},c={resistant:{withGene:{n:0,c:0},withoutGene:{n:0,c:0}},sensitive:{withGene:{n:0,c:0},withoutGene:{n:0,c:0}}};return n.forEach((function(e){var n=!1,i=!1;e.forEach((function(e){e.symbol===t&&(i=!0),"resistant"===e.response_group&&(n=!0)})),n&i?(r.resistant.withGene.push(e),c.resistant.withGene.n+=e.length):n&!i?(r.resistant.withoutGene.push(e),c.resistant.withoutGene.n+=e.length):!n&i?(r.sensitive.withGene.push(e),c.sensitive.withGene.n+=e.length):!n&!i?(r.sensitive.withoutGene.push(e),c.sensitive.withoutGene.n+=e.length):console.log("patients w/o a group found",e)})),Object.keys(c).forEach((function(e){return Object.keys(c[e]).forEach((function(t){c[e][t].c=1e3/c[e][t].n}))})),{grouped:r,coefficients:c}}var p=n(0),m="totalBalance";function G(e){var t=e.frequencies,n=e.dimensions,c=e.setSelectedGenes,i=Object(r.useRef)(!1),s=Object(r.useRef)(0),a=Object(r.useRef)(0),u=Object(r.useRef)(null),o=Object(r.useRef)(null),l=Object(r.useRef)(null),f=Object(r.useRef)(null),d=Object(r.useRef)(null),j=Object(r.useRef)(null),b=Object(r.useRef)(null),w=Object(r.useRef)(null),O=Object(r.useRef)(null),v=Object(r.useState)(0),G=Object(h.a)(v,2),x=G[0],y=G[1],E=Object(r.useState)(0),k=Object(h.a)(E,2),B=k[0],S=k[1];return Object(r.useEffect)((function(){function e(e){var t=e.clientX-s.current;return t<0?t=0:t>n.width&&(t=n.width),t}f.current.addEventListener("mousedown",(function(t){var n=e(t);y(n),S(n),i.current=!0,o.current=n,l.current=n})),f.current.addEventListener("mousemove",(function(t){if(i.current){var n=e(t);S(n),l.current=n}})),document.addEventListener("mouseup",(function(){if(u){i.current=!1;var e=u.current.x.domain(),t=Math.round(o.current/a.current),n=Math.round(l.current/a.current),r=g.h([t,n]),s=g.g([t,n]);s=g.h([s,e.length]);var h=e.slice(r,s);c(h)}}))}),[u,n,c]),Object(r.useEffect)((function(){if(t){w.current=t.sort((function(e,t){return t[m]-e[m]})),u.current={x:g.i().domain(w.current.map((function(e){return e.gene}))).range([0,n.width]).paddingInner(0).paddingOuter(0),y:g.j().domain(g.d(w.current,(function(e){return e[m]}))).range([n.height,0])},a.current=u.current.x.step();var e={x:g.a(u.current.x).tickValues([]),y:g.b(u.current.y)},r=g.f().x((function(e){return u.current.x(e.gene)})).y((function(e){return u.current.y(e[m])}));g.k(b.current).transition().call(e.y);var c=g.k(j.current).selectAll(".xAxisLine").data([0]);c.enter().append("line").attr("class","xAxisLine").merge(c).attr("x1",0).attr("x2",n.width).attr("stroke-width",.5).attr("stroke","black").transition().attr("y1",u.current.y(0)).attr("y2",u.current.y(0)),s.current=d.current.getBoundingClientRect().x;var i=g.k(d.current).selectAll(".linePlot").data([w.current]);i.enter().append("path").attr("class","linePlot").merge(i).transition().attr("d",r).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5)}}),[t,d,w,n,j,b]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("svg",{ref:f,width:n.svgWidth,height:n.svgHeight,children:[Object(p.jsx)("g",{ref:b,className:"yAxis",transform:"translate(".concat(n.margins.left,", ").concat(n.margins.top,")")}),Object(p.jsxs)("g",{ref:d,transform:"translate(".concat(n.margins.left,", ").concat(n.margins.top,")"),viewBox:"0 0 ".concat(n.width," ").concat(n.height),children:[Object(p.jsx)("rect",{ref:O,className:"selectionBox",width:Math.abs(x-B),height:n.height,transform:"translate(".concat(x<B?x:B,",0)")}),Object(p.jsx)("g",{ref:j,children:" "})]})]})})}function x(e){var t=e.geneList,n=e.onChange;t=t.sort();return Object(p.jsxs)("select",{id:"geneSelector",onChange:function(e){n(e.target.value)},className:"geneSelector",children:[Object(p.jsx)("option",{value:"TP53",children:"TP53"},-1),t.map((function(e,t){return Object(p.jsx)("option",{value:e,children:e},t)}))]})}function y(e){var t=e.selectedGenes;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"selectedGenesBox",children:t.join("\r\n")})})}n(152);var E={svgWidth:500,svgHeight:400,margins:{top:10,left:30,bottom:10,right:10}};function k(){var e=Object(r.useState)(["loading"]),t=Object(h.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(null),s=Object(h.a)(i,2),a=s[0],l=s[1],f=Object(r.useState)("TP53"),g=Object(h.a)(f,2),d=g[0],b=g[1],w=Object(r.useState)([]),O=Object(h.a)(w,2),v=O[0],m=O[1];return Object(r.useEffect)((function(){function e(){return e=Object(o.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(d);case 2:t=e.sent,n=t.geneFrequencies,r=t.geneList,l(n,r),c(r);case 7:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Genes combinations in Paclitaxel resistance"}),Object(p.jsxs)("p",{children:["Choose a background gene. ",v.length," of ",n.length," ","genes were chosen."]}),Object(p.jsx)(x,{geneList:n,onChange:b}),Object(p.jsx)("p",{}),Object(p.jsx)(G,{frequencies:a,dimensions:E,setSelectedGenes:m}),Object(p.jsx)(y,{selectedGenes:v})]})}E=Object(l.a)(Object(l.a)({},E),{},{width:E.svgWidth-E.margins.left-E.margins.right,height:E.svgHeight-E.margins.top-E.margins.bottom});var B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,154)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),i(e),s(e)}))};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(k,{})}),document.getElementById("root")),B()}},[[153,1,2]]]);
//# sourceMappingURL=main.1ee83373.chunk.js.map